<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" media="screen" href="../_style/app.screen.css">
    <link rel="stylesheet" media="screen" href="../_style/survey.screen.css">
    <title>Community Needs Assessment Tool</title>
  </head>
  <body>
  <header class="withLink">
    <h1>Community Needs Assessment Tool</h1>
    <a href="./exit">&times;</a>
  </header>
  <main>
    <p class="init">Loading...</p>
    <div class="consent hidden">
      <div class="content">
        <p id="surveyDescription"></p>
        <h2>Consent to take part in research pilot</h2>
        <details>
          <summary>Click here to see what you're consenting to</summary>
          <ul>
            <li>I voluntarily agree to participate in this pilot study for a community needs assessment digital application.</li>
            <li>I understand that I am participating in an assessment of this digital application in this pilot test of my own free will.</li>
            <li>I understand that I should not expect any financial gain, remuneration or benefit directly for participation in this pilot test.</li>
            <li>I understand that all information I provide in this study will be treated confidentially and no personal information will be shared.</li>
            <li>I understand that in the findings and results of this study my identity will remain anonymous.</li>
            <li>I understand that my participation in this pilot will in no way advantage or disadvantage me in future engagements with the host organisation.</li>
            <li>I understand that as the information will be stored anonymously, I may not be able to access my specific responses.</li>
            <li>I understand that participating in this pilot does not mean that I will expect any action to be taken from the host organisation based on my responses and feedback.</li>
          </ul>
        </details>
        <form>
          <label><input type="checkbox" name="giveConsent" required/>I understand and consent to the above</label>
          <button type="submit" id="giveConsent">Start survey</button>
        </form>
      </div>
    </div>
    <form class="survey hidden" name="survey" action="https://satcap-research.web.app/api/survey" method="POST">
      <input type="hidden" name="consent" value="true" />
      <input type="hidden" name="survey" value="wp-three-two" />
      <input type="hidden" name="mineDocId" />
      <input type="hidden" name="linkDocId" />
      <input type="hidden" name="linkId" />
      <div class="question">
        <p>Question One</p>
        <label>
          <span>Which town/community do you currently live in?</span> 
          <span class="sub">Please provide the place name and/or location</span>
          <input type="text" name="questionOne" />
        </label>
      </div>
      <div class="question">
        <p>Question Two</p>
        <label>
          <span>Where do you work currently?</span>
          <input type="text" name="questionTwo" />
        </label>
      </div>
      <div class="question">
        <p>Question Three</p>
        <span class="label">What type of mine is in your community?</span>
        <div class="multiple">
          <label class="selector">
            <input type="radio" value="Gold" name="questionThree" data-on-change="free-text"/>
            <span>Gold</span>
          </label>
          <label class="selector">
            <input type="radio" value="Platinum Group Metals (PGM)" name="questionThree" data-on-change="free-text"/>
            <span>Platinum Group Metals (PGM)</span>
          </label>
          <label class="selector">
            <input type="radio" value="Coal" name="questionThree" data-on-change="free-text"/>
            <span>Coal</span>
          </label>
          <label class="selector">
            <input type="radio" value="Iron" name="questionThree" data-on-change="free-text"/>
            <span>Iron</span>
          </label>
          <label class="selector">
            <input type="radio" value="Other" name="questionThree" data-on-change="free-text" data-free-text="true" />
            <span>Other</span>
          </label>
        </div>
      </div>
      <div class="question">
        <p>Question Four</p>
        <label>
          <span>Which age bracket do you fall into?</span>
          <select name="questionFour">
            <option value="">Select an option</option>
            <option value="1-15">1 - 15</option>
            <option value="15-25">15 - 25</option>
            <option value="25-35">25 - 35</option>
            <option value="35-45">35 - 45</option>
            <option value="45-55">45 - 55</option>
            <option value="55-65">55 - 65</option>
            <option value="65 or older">65 or older</option>
          </select>
        </label>
      </div>
      <div class="question">
        <p>Question Five</p>
        <fieldset class="radioGroup">
          <legend>What is your gender?</legend>
          <label>
            <input type="radio" value="Female" name="questionFive"/>
            <span>Female</span>
          </label>
          <label>
            <input type="radio" value="Male" name="questionFive"/>
            <span>Male</span>
          </label>
          <label>
            <input type="radio" value="Prefer not to say" name="questionFive"/>
            <span>Prefer not to say</span>
          </label>
        </fieldset>
      </div>
      <div class="question">
        <p>Question Six</p>
        <label>
          <span>What is your highest level of education?</span>
          <select name="questionSix">
            <option value="">Select an option</option>
            <option value="No formal schooling">No formal schooling</option>
            <option value="Primary School">Primary School</option>
            <option value="High School">High School (Gr.8 â€“ Gr. 11)</option>
            <option value="Matric">Matric</option>
            <option value="TVET diploma">TVET diploma</option>
            <option value="College diploma">College diploma</option>
            <option value="University degree/Post graduate studies">University degree/Post graduate studies</option>
          </select>
        </label>
      </div>
      <div class="question">
        <p>Question Seven</p>
        <fieldset class="radioGroup">
          <legend>Are you a SMME/business owner?</legend>
          <label>
            <input type="radio" value="Yes" name="questionSeven" data-on-change="conditionalPath" data-conditional-path="seven-yes-seven-no"/>
            <span>Yes</span>
          </label>
          <label>
            <input type="radio" value="No" name="questionSeven" data-on-change="conditionalPath" data-conditional-path="seven-yes-seven-no"/>
            <span>No</span>
          </label>
        </fieldset>
        <template data-choice="seven-yes">
          <div class="question">
            <p>SMME: Question One</p>
            <span>What services do you provide?</span>
            <span class="sub">Choose as many as applicable</span>
            <div class="multiple">
              <label class="selector">
                <input type="checkbox" value="Automotive" name="SMMEQuestionOne" />
                <span>Automotive</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Agriculture, Regenerative agriculture, agro-processing and re-forestry" name="SMMEQuestionOne" />
                <span>Agriculture, Regenerative agriculture, agro-processing and re-forestry</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Construction and building" name="SMMEQuestionOne" />
                <span>Construction and building</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Creative and Design Industry" name="SMMEQuestionOne" />
                <span>Creative and Design Industry</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Engineering" name="SMMEQuestionOne" />
                <span>Engineering</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Healthcare" name="SMMEQuestionOne" />
                <span>Healthcare</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Mining and minerals" name="SMMEQuestionOne" />
                <span>Mining and minerals</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Mine rehabilitation" name="SMMEQuestionOne" />
                <span>Mine rehabilitation</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Mine waste beneficiation" name="SMMEQuestionOne" />
                <span>Mine waste beneficiation</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="e-Waste" name="SMMEQuestionOne" />
                <span>e-Waste</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Renewable energy" name="SMMEQuestionOne" />
                <span>Renewable energy</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Small/light manufacturing" name="SMMEQuestionOne" />
                <span>Small/light manufacturing</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Services and retail trade" name="SMMEQuestionOne" />
                <span>Services and retail trade</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Textiles" name="SMMEQuestionOne" />
                <span>Textiles</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Tourism and hospitality" name="SMMEQuestionOne" />
                <span>Tourism and hospitality</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Oil and gas" name="SMMEQuestionOne" />
                <span>Oil and gas</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Recycling or Upcycling" name="SMMEQuestionOne" />
                <span>Recycling or Upcycling</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Waste management" name="SMMEQuestionOne" />
                <span>Waste management</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Catering" name="SMMEQuestionOne" />
                <span>Catering</span>
              </label>
              <label class="selector">
                <input type="checkbox" value="Retail" name="SMMEQuestionOne" />
                <span>Retail</span>
              </label>
            </div>
            <label>
              <span>Other</span>
              <input type="text" placeholder="Please specify" name="SMMEQuestionOne" />
            </label>
          </div>
          <div class="question">
            <p>SMME: Question Two</p>
            <fieldset class="radioGroup">
              <legend>Are you a service provider to the mine?</legend>
              <label>
                <input type="radio" value="Yes" name="SMMEQuestionTwo" data-on-change="conditionalPath" data-conditional-path="SMMEOne-yes-SMMEOne-no"/>
                <span>Yes</span>
              </label>
              <label>
                <input type="radio" value="No" name="SMMEQuestionTwo" data-on-change="conditionalPath" data-conditional-path="SMMEOne-yes-SMMEOne-no"/>
                <span>No</span>
              </label>
            </fieldset>
            <template data-choice="smmeOne-yes">
              <div class="question">
                <span>How long have you been supplying the mine?</span>
                <div class="multiple">
                  <label class="selector">
                    <input type="radio" value="A few months" name="SMMEQuestionTwo" />
                    <span>A few months</span>
                  </label>
                  <label class="selector">
                    <input type="radio" value="6 months - 1 year" name="SMMEQuestionTwo" />
                    <span>6 months - 1 year</span>
                  </label>
                  <label class="selector">
                    <input type="radio" value="More than 1 year" name="SMMEQuestionTwo" />
                    <span>More than 1 year</span>
                  </label>
                  <label class="selector">
                    <input type="radio" value="Over 5 years" name="SMMEQuestionTwo" />
                    <span>Over 5 years</span>
                  </label>
                </div>
              </div>
            </template>
            <template data-choice="smmeOne-no">
              <div class="question">
                <fieldset class="radioGroup">
                  <legend>Would you like to supply the mine?</legend>
                  <label>
                    <input type="radio" value="Yes" name="SMMEQuestionTwo"/>
                    <span>Yes</span>
                  </label>
                  <label>
                    <input type="radio" value="No" name="SMMEQuestionTwo"/>
                    <span>No</span>
                  </label>
                </fieldset>
              </div>
            </template>
          </div>
          <div class="question">
            <p>SMME: Question Three</p>
            <label>
              <span>What stage would you describe your business at present?</span>
              <select name="questionThree">
                <option value="">Select an option</option>
                <option value="Ideating (A form of idea or concept you are having)">Ideating (A form of idea or concept you are having)</option>
                <option value="Concepting (Mapping out the idea on paper)">Concepting (Mapping out the idea on paper)</option>
                <option value="Committing (Carrying out the idea)">Committing (Carrying out the idea)</option>
                <option value="Validating (Providing the accuracy of the idea)">Validating (Providing the accuracy of the idea)</option>
                <option value="Scaling (Initiating growth in a company)">Scaling (Initiating growth in a company)</option>
                <option value="Establishing/Maturity (Level off from rapid growth period)">Establishing/Maturity (Level off from rapid growth period)</option>
              </select>
            </label>
          </div>
        </template>
        <template data-choice="seven-no">
          <div class="question">
            <fieldset class="radioGroup">
              <legend>Are you employed?</legend>
              <label>
                <input type="radio" value="Yes" name="communityQuestionOne" data-on-change="conditionalPath" data-conditional-path="communityOne-yes"/>
                <span>Yes</span>
              </label>
              <label>
                <input type="radio" value="No" name="communityQuestionOne" data-on-change="conditionalPath" data-conditional-path="communityOne-yes"/>
                <span>No</span>
              </label>
            </fieldset>
          </div>
        </template>
      </div>
      <button type="submit">Submit</button>
    </form>
    <template id="modal">
      <div class="modal close">
        <embed />
      </div>
    </template>
    <template id="selectFreeText">
      <label class="free-text">
        <span>Please specify</span>
        <input type="text" name="" />
      </label>
    </template>
  </main>
  <footer class="hidden">
    <div class="progress">
      <label for="progress"></label>
      <progress id="progress" max="100" value=""></progress>
    </div>
  </footer>
  <script defer src="https://unpkg.com/dayjs@1.11.5/dayjs.min.js"></script>
  <script defer type="module">
    import { logEvent } from 'https://www.gstatic.com/firebasejs/9.9.3/firebase-analytics.js'
    import { analytics, getLink, initMenu } from '../_scripts/init.js'
    import { initialise } from '../_scripts/survey.js'

    const link = await getLink()
    const suveryKey = 'wp-three-two'
    const localSubmissions= JSON.parse(window.localStorage.getItem('submissions')) || []
    
    initialise(suveryKey, localSubmissions)
    logEvent(analytics, 'survey_start', {
      name: `${link.package.name} - ${link.package.survey.title}`,
      user_ref: window.localStorage.getItem('userRef'),
      link_id: link.linkId,
      package_id: link.package.docId,
      time_stamp: dayjs().format('YYYY-MM-DD HH:mm:ssZ')
    });

  </script>
  </body>
</html>